import{_ as e,o as a,c as s,Q as t}from"./chunks/framework.9b0cfcaf.js";const l="/Gateway/assets/sb_rules.bf7b5ec0.png",v=JSON.parse('{"title":"SimpleBind","description":"","frontmatter":{},"headers":[],"relativePath":"simplebind.md","filePath":"simplebind.md"}'),p={name:"simplebind.md"},o=t('<h1 id="simplebind" tabindex="-1">SimpleBind <a class="header-anchor" href="#simplebind" aria-label="Permalink to &quot;SimpleBind&quot;">​</a></h1><p>SimpleBind позволяет настроить локальные автоматизации внутри шлюза, путем вызова тех или иных правил (SB Rule) при изменении состояний устройств.</p><h2 id="настроика" tabindex="-1">Настройка <a class="header-anchor" href="#настроика" aria-label="Permalink to &quot;Настройка&quot;">​</a></h2><p>Для настройки необходимо зайти в свойства устройства (пульта, кнопки, датчика) и на вкладке &quot;States&quot; напротив контролируемого состояния в &quot;SB rule&quot; прописать необходимый код.</p><p><img src="'+l+'" alt="sb_rules"></p><h2 id="правила" tabindex="-1">Правила <a class="header-anchor" href="#правила" aria-label="Permalink to &quot;Правила&quot;">​</a></h2><h3 id="управление-устроиствами" tabindex="-1">Управление устройствами <a class="header-anchor" href="#управление-устроиствами" aria-label="Permalink to &quot;Управление устройствами&quot;">​</a></h3><p>Позволяет напрямую из правила управлять целевыми устройствами, в зависимости от значения контролируемого состояния. Можно использовать несколько правил, разделяя их точкой с запятой.</p><ul><li><strong>Формат записи SB Rule</strong></li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">rule1[;rule2;ruleN]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">rule1[;rule2;ruleN]</span></span></code></pre></div><ul><li><strong>Формат rule</strong></li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[condition] srcStateValue, dstDeviceId, dstStateName, DstStateValue</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[condition] srcStateValue, dstDeviceId, dstStateName, DstStateValue</span></span></code></pre></div><p>где аргументы разделённые запятыми (пробелы допускаются):</p><ul><li><p>condition - необязательное условие <code>&gt;, &lt;, =, !, &gt;=, &lt;=, !=, &lt;&gt;</code></p></li><li><p>srcState - значение состояния при котором будет выполняться правило</p></li><li><p>dstDeviceId - идентификатор устройства которому будем отправлять команду. Допускается <code>FriendlyName</code>, <code>ieeeAddr</code>, <code>nwkAddr</code></p></li><li><p>dstStateName - имя состояния которым будем управлять</p></li><li><p>dstStateValue - значение которое будем отправлять в целевое состояние</p></li><li><p><strong>Примеры</strong></p></li></ul><p>При одиночном нажатии кнопки переключает режим lamp_1</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">single, lamp_1, state, TOGGLE</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">single, lamp_1, state, TOGGLE</span></span></code></pre></div><p>В зависимости от состояния выключателя, инвертирует режим для реле</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">ON, 0x00158D00007350D9, state, OFF; OFF, 0x00158D00007350D9, state, ON</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">ON, 0x00158D00007350D9, state, OFF; OFF, 0x00158D00007350D9, state, ON</span></span></code></pre></div><p>Закрывает замок при клике, открывает при двойном</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">single, door_lock, state, LOCK; double, door_lock, state, UNLOCK</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">single, door_lock, state, LOCK; double, door_lock, state, UNLOCK</span></span></code></pre></div><p>Для датчика влажности, включает увлажнитель если влажность меньше 40% и выключает если больше 60%</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">&lt;40, humidifier, state, ON; &gt;60, humidifier, state, OFF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">&lt;40, humidifier, state, ON; &gt;60, humidifier, state, OFF</span></span></code></pre></div><p>При разном типе нажатия на кнопку, управляет разной нагрузкой</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">single,lmp_bedroom,state,TOGGLE;double,lmp_bedroom-nightlight,state,TOGGLE;triple,rel_subwoofer,state,TOGGLE</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">single,lmp_bedroom,state,TOGGLE;double,lmp_bedroom-nightlight,state,TOGGLE;triple,rel_subwoofer,state,TOGGLE</span></span></code></pre></div><h3 id="вызов-скрипта-lua" tabindex="-1">Вызов скрипта LUA <a class="header-anchor" href="#вызов-скрипта-lua" aria-label="Permalink to &quot;Вызов скрипта LUA&quot;">​</a></h3><p>Позволяет вызвать скрипт <a href="/Gateway/lua">LUA</a> и передать в него параметры.</p><ul><li><strong>Формат записи SB Rule</strong></li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">script.lua[,Param]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">script.lua[,Param]</span></span></code></pre></div><ul><li><strong>Примеры</strong></li></ul><p>Передача параметров в скрипт позволяет использовать один скрипт для обработки разных устройств. При этом вся логика однажды прописывается в скрипте, а для подстройки некоторых параметров, достаточно их изменить в SB Rule</p><p>При каждом изменении состояния датчика открытия вызвать скрипт <code>mainDoorOnOffLight.lua</code>, с параметром <code>mag|false|rel_tambur|state|ON|300</code></p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">mainDoorOnOffLight.lua, mag|false|rel_tambur|state|ON|300</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">mainDoorOnOffLight.lua, mag|false|rel_tambur|state|ON|300</span></span></code></pre></div><p>При каждом изменении состояния кнопки вызвать скрипт <code>mainDoorOnOffLight.lua</code>, с параметром <code>btn|false|rel_tambur|state|OFF|600</code></p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">mainDoorOnOffLight.lua, btn|false|rel_tambur|state|OFF|600</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">mainDoorOnOffLight.lua, btn|false|rel_tambur|state|OFF|600</span></span></code></pre></div><h3 id="выполнить-текст-скрипта-lua" tabindex="-1">Выполнить текст скрипта LUA <a class="header-anchor" href="#выполнить-текст-скрипта-lua" aria-label="Permalink to &quot;Выполнить текст скрипта LUA&quot;">​</a></h3><p>Позволяет выполнить код скрипта прямо из правила SimpleBind</p><ul><li><strong>Формат записи SB Rule</strong></li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#code</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#code</span></span></code></pre></div><ul><li><strong>Примеры</strong></li></ul><p>Вывод в лог имени вызвавшего устройства, состояния и его значения</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#print(Event.FriendlyName, Event.State.Name, Event.State.Value)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#print(Event.FriendlyName, Event.State.Name, Event.State.Value)</span></span></code></pre></div><h3 id="записать-значение-в-объект" tabindex="-1">Записать значение в <a href="/Gateway/objects">объект</a> <a class="header-anchor" href="#записать-значение-в-объект" aria-label="Permalink to &quot;Записать значение в [объект](/objects.md)&quot;">​</a></h3><p>Позволяет записать в объект значение состояния, к которому привязано правило. Если объекта не существует, то он будет создан</p><ul><li><strong>Формат записи SB Rule</strong></li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">objectName</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">objectName</span></span></code></pre></div>',45),i=[o];function n(c,d,r,u,h,g){return a(),s("div",null,i)}const m=e(p,[["render",n]]);export{v as __pageData,m as default};
